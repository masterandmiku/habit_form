<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Habit formation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Times New Roman', Times, serif;
        }
        
        :root {
            --black: #000000;
            --dark-gray: #0a0a0a;
            --gray: #1a1a1a;
            --light-gray: #2a2a2a;
            --white: #ffffff;
            --off-white: #e8e8e8;
        }
        
        body {
            background-color: var(--black);
            color: var(--off-white);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255, 255, 255, 0.02) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(255, 255, 255, 0.02) 0%, transparent 20%);
            min-height: 100vh;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 40px 0;
            border-bottom: 1px solid var(--light-gray);
            margin-bottom: 40px;
            position: relative;
        }
        
        header::before, header::after {
            content: "‚Ä†";
            position: absolute;
            bottom: -15px;
            font-size: 24px;
            color: var(--off-white);
        }
        
        header::before {
            left: 20%;
        }
        
        header::after {
            right: 20%;
        }
        
        h1 {
            font-size: 3.5rem;
            letter-spacing: 5px;
            text-transform: uppercase;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            color: var(--white);
            font-weight: normal;
        }
        
        .subtitle {
            font-size: 1.2rem;
            font-style: italic;
            color: var(--off-white);
            letter-spacing: 2px;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
            margin-bottom: 50px;
        }
        
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
        
        .sidebar {
            background: var(--dark-gray);
            border: 1px solid var(--light-gray);
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            position: relative;
        }
        
        .sidebar::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(to right, transparent, var(--white), transparent);
        }
        
        .section-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--light-gray);
            text-align: center;
            letter-spacing: 2px;
            color: var(--white);
        }
        
        .habit-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        label {
            font-size: 0.9rem;
            color: var(--off-white);
        }
        
        input, select, textarea {
            background: var(--gray);
            border: 1px solid var(--light-gray);
            padding: 10px;
            color: var(--off-white);
            font-size: 1rem;
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        button {
            background: var(--gray);
            color: var(--off-white);
            border: 1px solid var(--light-gray);
            padding: 12px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 10px;
        }
        
        button:hover {
            background: var(--light-gray);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
        }
        
        .habits-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .habit-card {
            background: var(--dark-gray);
            border: 1px solid var(--light-gray);
            padding: 20px;
            position: relative;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .habit-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
        }
        
        .habit-card::before {
            content: "‚úû";
            position: absolute;
            top: 10px;
            right: 10px;
            color: var(--off-white);
            font-size: 1.2rem;
        }
        
        .habit-title {
            font-size: 1.4rem;
            margin-bottom: 10px;
            color: var(--white);
            border-bottom: 1px solid var(--light-gray);
            padding-bottom: 8px;
        }
        
        .habit-category {
            display: inline-block;
            background: var(--gray);
            color: var(--off-white);
            padding: 3px 8px;
            font-size: 0.8rem;
            margin-bottom: 10px;
            border: 1px solid var(--light-gray);
        }
        
        .habit-description {
            margin-bottom: 15px;
            font-size: 0.95rem;
            color: var(--off-white);
        }
        
        .habit-streak {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .streak-count {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--white);
        }
        
        .streak-label {
            font-size: 0.9rem;
            color: var(--off-white);
        }
        
        .habit-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
        }
        
        .check-btn {
            background: transparent;
            border: 1px solid var(--light-gray);
            padding: 8px 15px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .check-btn.checked {
            background: var(--white);
            color: var(--black);
        }
        
        .delete-btn {
            background: transparent;
            border: 1px solid var(--light-gray);
            padding: 8px 15px;
            font-size: 0.9rem;
            color: var(--off-white);
        }
        
        .calendar {
            margin-top: 40px;
            background: var(--dark-gray);
            border: 1px solid var(--light-gray);
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-top: 15px;
        }
        
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--light-gray);
            font-size: 0.9rem;
            background: var(--gray);
            position: relative;
            padding: 5px;
        }
        
        .calendar-day.checked {
            background: var(--white);
            color: var(--black);
        }
        
        .calendar-day.today {
            border: 2px solid var(--white);
        }
        
        .day-number {
            font-size: 1rem;
            font-weight: bold;
        }
        
        .day-checkins {
            font-size: 0.7rem;
            margin-top: 2px;
        }
        
        .calendar-header {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-bottom: 10px;
            text-align: center;
            font-weight: bold;
            color: var(--white);
        }
        
        .calendar-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .calendar-title {
            font-size: 1.2rem;
            color: var(--white);
        }
        
        .calendar-nav {
            display: flex;
            gap: 10px;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }
        
        .stat-card {
            background: var(--dark-gray);
            border: 1px solid var(--light-gray);
            padding: 20px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 2.5rem;
            color: var(--white);
            margin-bottom: 10px;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: var(--off-white);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        footer {
            text-align: center;
            padding: 30px 0;
            margin-top: 50px;
            border-top: 1px solid var(--light-gray);
            color: var(--off-white);
            font-size: 0.9rem;
        }
        
        .gothic-border {
            height: 20px;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0,10 Q25,0 50,10 T100,10' stroke='%23ffffff' fill='none' stroke-width='2'/%3E%3C/svg%3E");
            background-repeat: repeat-x;
            margin: 20px 0;
            opacity: 0.7;
        }
        
        .empty-state {
            text-align: center;
            padding: 40px;
            color: var(--off-white);
            font-style: italic;
        }
        
        .empty-state i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: var(--light-gray);
        }

        .gothic-frame {
            border: 2px solid var(--light-gray);
            padding: 15px;
            position: relative;
            margin: 20px 0;
        }
        
        .gothic-frame::before, .gothic-frame::after {
            content: "‚úú";
            position: absolute;
            font-size: 1.5rem;
        }
        
        .gothic-frame::before {
            top: -10px;
            left: -10px;
        }
        
        .gothic-frame::after {
            bottom: -10px;
            right: -10px;
        }
        
        .moon-phase {
            font-size: 0.6rem;
            position: absolute;
            top: 2px;
            right: 2px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1Habit formation</h1>
            <p class="subtitle">The devil is in the details.</p>
        </header>
        
        <div class="gothic-border"></div>
        
        <div class="main-content">
            <aside class="sidebar">
                <h2 class="section-title">Developing new habits </h2>
                <form class="habit-form" id="habit-form">
                    <div class="form-group">
                        <label for="habit-name">Habit Name</label>
                        <input type="text" id="habit-name" placeholder="example:reading" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="habit-category">Category</label>
                        <select id="habit-category">
                            <option value="daily">daily</option>
                            <option value="knowledge">work</option>
                            <option value="health">health</option>
                            <option value="creative">relax</option>
                            <option value="mindfulness">other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="habit-description">Habit Description (Optional)</label>
                        <textarea id="habit-description" placeholder="Describe your Night Contract..."></textarea>
                    </div>
                    
                    <button type="submit">confirm</button>
                </form>
                
                <div class="gothic-border"></div>
                
                <div class="gothic-frame">
                    <h2 class="section-title">Motto</h2>
                    <p>"In the purest black and white, habit is the only eternal truth. Persist through thirty cycles, and it will become your nature."</p>
                </div>
            </aside>
            
            <main>
                <h2 class="section-title">Habit Tracking</h2>
                
                <div class="habits-container" id="habits-container">
                    <!-- ‰π†ÊÉØÂç°ÁâáÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÊ∑ªÂä† -->
                    
                    <div class="empty-state" id="empty-state">
                        <i class="fas fa-skull"></i>
                        <p>No habits have been recorded yet.<br>Create your first habit tracking record in the table on the left.</p>
                    </div>
                </div>
                
                <div class="calendar">
                    <div class="calendar-controls">
                        <button id="prev-month"><i class="fas fa-chevron-left"></i></button>
                        <div class="calendar-title" id="calendar-title">2023 year 10 month </div>
                        <button id="next-month"><i class="fas fa-chevron-right"></i></button>
                    </div>
                    
                    <div class="calendar-header">
                        <div>Sunday</div>
                        <div>Monday</div>
                        <div>Tuesday</div>
                        <div>Wednesday</div>
                        <div>Thursday</div>
                        <div>Friday</div>
                        <div>Saturday</div>
                    </div>
                    <div class="calendar-grid" id="calendar-grid">
                        <!-- Êó•ÂéÜÂ§©Êï∞Â∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÊ∑ªÂä† -->
                    </div>
                    
                    <div class="gothic-border" style="margin: 20px 0 10px 0;"></div>
                    
                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem; color: var(--off-white);">
                        <div><span style="display: inline-block; width: 12px; height: 12px; background: var(--white); margin-right: 5px;"></span> Completed</div>
                        <div><span style="display: inline-block; width: 12px; height: 12px; border: 1px solid var(--white); margin-right: 5px;"></span> Today</div>
                        <div><i class="fas fa-moon" style="margin-right: 5px;"></i> Lunar Phase Indicator</div>
                    </div>
                </div>
                
                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-value" id="total-habits">0</div>
                        <div class="stat-label">Total Number of Habits</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="current-streak">0</div>
                        <div class="stat-label">Check-in Times</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="completion-rate">0%</div>
                        <div class="stat-label">Completion Progress</div>
                    </div>
                </div>
            </main>
        </div>
        
        <footer>
            <p>Habit formation &copy; 2025 - The moon is watching.....</p>
            <p>This webpage uses only local storage. pay attention to it!</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Ëé∑ÂèñDOMÂÖÉÁ¥†
            const habitForm = document.getElementById('habit-form');
            const habitsContainer = document.getElementById('habits-container');
            const emptyState = document.getElementById('empty-state');
            const calendarGrid = document.getElementById('calendar-grid');
            const calendarTitle = document.getElementById('calendar-title');
            const prevMonthBtn = document.getElementById('prev-month');
            const nextMonthBtn = document.getElementById('next-month');
            const totalHabitsElement = document.getElementById('total-habits');
            const currentStreakElement = document.getElementById('current-streak');
            const completionRateElement = document.getElementById('completion-rate');
            
            // ‰ªéÊú¨Âú∞Â≠òÂÇ®Âä†ËΩΩ‰π†ÊÉØÊï∞ÊçÆ
            let habits = JSON.parse(localStorage.getItem('gothicHabits')) || [];
            
            // Êó•ÂéÜÁõ∏ÂÖ≥ÂèòÈáè
            let currentDate = new Date();
            let currentYear = currentDate.getFullYear();
            let currentMonth = currentDate.getMonth();
            
            // ÂàùÂßãÂåñ
            renderHabits();
            renderCalendar();
            updateStats();
            
            // Ê∑ªÂä†Êñ∞‰π†ÊÉØ
            habitForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const name = document.getElementById('habit-name').value;
                const category = document.getElementById('habit-category').value;
                const description = document.getElementById('habit-description').value;
                
                const newHabit = {
                    id: Date.now(),
                    name,
                    category,
                    description,
                    streak: 0,
                    createdAt: new Date().toISOString(),
                    checkins: []
                };
                
                habits.push(newHabit);
                saveHabits();
                renderHabits();
                updateStats();
                
                // ÈáçÁΩÆË°®Âçï
                habitForm.reset();
            });
            
            // Êó•ÂéÜÂØºËà™
            prevMonthBtn.addEventListener('click', function() {
                currentMonth--;
                if (currentMonth < 0) {
                    currentMonth = 11;
                    currentYear--;
                }
                renderCalendar();
            });
            
            nextMonthBtn.addEventListener('click', function() {
                currentMonth++;
                if (currentMonth > 11) {
                    currentMonth = 0;
                    currentYear++;
                }
                renderCalendar();
            });
            
            // ÊâìÂç°‰π†ÊÉØ
            function checkInHabit(habitId) {
                const today = new Date().toDateString();
                const habit = habits.find(h => h.id === habitId);
                
                if (habit) {
                    // Ê£ÄÊü•‰ªäÂ§©ÊòØÂê¶Â∑≤ÁªèÊâìÂç°
                    const alreadyCheckedIn = habit.checkins.some(checkin => 
                        new Date(checkin).toDateString() === today
                    );
                    
                    if (!alreadyCheckedIn) {
                        habit.checkins.push(new Date().toISOString());
                        
                        // Êõ¥Êñ∞ËøûÁª≠Â§©Êï∞
                        updateStreak(habit);
                        
                        saveHabits();
                        renderHabits();
                        renderCalendar();
                        updateStats();
                    }
                }
            }
            
            // Êõ¥Êñ∞ËøûÁª≠Â§©Êï∞
            function updateStreak(habit) {
                if (habit.checkins.length === 0) {
                    habit.streak = 0;
                    return;
                }
                
                // Â∞ÜÊâìÂç°Êó•ÊúüÊéíÂ∫è
                const sortedCheckins = habit.checkins
                    .map(date => new Date(date))
                    .sort((a, b) => b - a);
                
                let streak = 1;
                let currentDate = new Date(sortedCheckins[0]);
                
                // Ê£ÄÊü•ËøûÁª≠Â§©Êï∞
                for (let i = 1; i < sortedCheckins.length; i++) {
                    const prevDate = new Date(sortedCheckins[i]);
                    const diffTime = currentDate - prevDate;
                    const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
                    
                    if (diffDays === 1) {
                        streak++;
                        currentDate = prevDate;
                    } else {
                        break;
                    }
                }
                
                habit.streak = streak;
            }
            
            // Âà†Èô§‰π†ÊÉØ
            function deleteHabit(habitId) {
                if (confirm('Á°ÆÂÆöË¶ÅÊíïÊØÅËøô‰∏™Â•ëÁ∫¶ÂêóÔºüÊ≠§‰ª™Âºè‰∏çÂèØÈÄÜËΩ¨„ÄÇ')) {
                    habits = habits.filter(h => h.id !== habitId);
                    saveHabits();
                    renderHabits();
                    updateStats();
                }
            }
            
            // ‰øùÂ≠ò‰π†ÊÉØÂà∞Êú¨Âú∞Â≠òÂÇ®
            function saveHabits() {
                localStorage.setItem('gothicHabits', JSON.stringify(habits));
            }
            
            // Ê∏≤Êüì‰π†ÊÉØÂàóË°®
            function renderHabits() {
                if (habits.length === 0) {
                    emptyState.style.display = 'block';
                    habitsContainer.innerHTML = '';
                    habitsContainer.appendChild(emptyState);
                    return;
                }
                
                emptyState.style.display = 'none';
                
                habitsContainer.innerHTML = '';
                
                habits.forEach(habit => {
                    const today = new Date().toDateString();
                    const isCheckedToday = habit.checkins.some(checkin => 
                        new Date(checkin).toDateString() === today
                    );
                    
                    const habitCard = document.createElement('div');
                    habitCard.className = 'habit-card';
                    
                    const categoryLabels = {
                        daily: 'Êó•Â∏∏‰ª™Âºè',
                        knowledge: 'Áü•ËØÜÊ±≤Âèñ',
                        health: 'Ë∫´‰Ωì‰øÆË°å',
                        creative: 'ÂàõÈÄ†‰ª™Âºè',
                        mindfulness: 'ÂøÉÁÅµÂÜ•ÊÉ≥'
                    };
                    
                    habitCard.innerHTML = `
                        <h3 class="habit-title">${habit.name}</h3>
                        <div class="habit-category">${categoryLabels[habit.category]}</div>
                        <p class="habit-description">${habit.description || 'Êó†ÊèèËø∞'}</p>
                        <div class="habit-streak">
                            <span class="streak-count">${habit.streak}</span>
                            <span class="streak-label">ËøûÁª≠ËΩÆÂõû</span>
                        </div>
                        <div class="habit-actions">
                            <button class="check-btn ${isCheckedToday ? 'checked' : ''}" 
                                    onclick="checkInHabit(${habit.id})">
                                <i class="fas ${isCheckedToday ? 'fa-check-circle' : 'fa-circle'}"></i>
                                ${isCheckedToday ? 'Â∑≤ÂÆåÊàê' : 'ÂÆåÊàê‰ª™Âºè'}
                            </button>
                            <button class="delete-btn" onclick="deleteHabit(${habit.id})">
                                <i class="fas fa-trash"></i> ÊíïÊØÅ
                            </button>
                        </div>
                    `;
                    
                    habitsContainer.appendChild(habitCard);
                });
            }
            
            // Ê∏≤ÊüìÊó•ÂéÜ
            function renderCalendar() {
                calendarGrid.innerHTML = '';
                
                const firstDayOfMonth = new Date(currentYear, currentMonth, 1);
                const lastDayOfMonth = new Date(currentYear, currentMonth + 1, 0);
                const today = new Date();
                
                // Êõ¥Êñ∞Êó•ÂéÜÊ†áÈ¢ò
                const monthNames = ["January", "February", "March", "April", "May",  "June",
                    "July", "August", "September", "October", "November",  "December"
                ];
                calendarTitle.textContent = `${currentYear}Âπ¥${monthNames[currentMonth]}`;
                
                // Ëé∑ÂèñÊú¨ÊúàÁ¨¨‰∏ÄÂ§©ÊòØÊòüÊúüÂá†Ôºà0ÊòØÊòüÊúüÊó•Ôºâ
                const firstDayOfWeek = firstDayOfMonth.getDay();
                
                // Ê∑ªÂä†Á©∫ÁôΩÊ†ºÂ≠ê
                for (let i = 0; i < firstDayOfWeek; i++) {
                    const emptyDay = document.createElement('div');
                    emptyDay.className = 'calendar-day';
                    calendarGrid.appendChild(emptyDay);
                }
                
                // Ê∑ªÂä†Êó•ÊúüÊ†ºÂ≠ê
                for (let day = 1; day <= lastDayOfMonth.getDate(); day++) {
                    const dayElement = document.createElement('div');
                    dayElement.className = 'calendar-day';
                    
                    const dateStr = new Date(currentYear, currentMonth, day).toDateString();
                    const isToday = dateStr === today.toDateString();
                    
                    if (isToday) {
                        dayElement.classList.add('today');
                    }
                    
                    // ËÆ°ÁÆóËøô‰∏ÄÂ§©ÊúâÂ§öÂ∞ë‰π†ÊÉØË¢´ÊâìÂç°
                    const checkinsOnThisDay = habits.reduce((count, habit) => {
                        const hasCheckin = habit.checkins.some(checkin => 
                            new Date(checkin).toDateString() === dateStr
                        );
                        return count + (hasCheckin ? 1 : 0);
                    }, 0);
                    
                    // Â¶ÇÊûúËøô‰∏ÄÂ§©ÊúâÊâìÂç°ÔºåÊ†áËÆ∞‰∏∫Â∑≤Ê£ÄÊü•
                    if (checkinsOnThisDay > 0) {
                        dayElement.classList.add('checked');
                    }
                    
                    // Ê∑ªÂä†Êó•ÊúüÊï∞Â≠ó
                    const dayNumber = document.createElement('div');
                    dayNumber.className = 'day-number';
                    dayNumber.textContent = day;
                    dayElement.appendChild(dayNumber);
                    
                    // Ê∑ªÂä†ÊâìÂç°Êï∞ÈáèÊòæÁ§∫
                    if (checkinsOnThisDay > 0) {
                        const dayCheckins = document.createElement('div');
                        dayCheckins.className = 'day-checkins';
                        dayCheckins.textContent = `${checkinsOnThisDay}È°π`;
                        dayElement.appendChild(dayCheckins);
                    }
                    
                    // Ê∑ªÂä†ÊúàÁõ∏ÊåáÁ§∫ÔºàÊ†πÊçÆÊó•ÊúüÁÆÄÂçïÊ®°ÊãüÔºâ
                    const moonPhase = document.createElement('div');
                    moonPhase.className = 'moon-phase';
                    // ÁÆÄÂçïÊ®°ÊãüÊúàÁõ∏ÂèòÂåñ
                    const phaseChar = day % 4 === 0 ? 'üåë' : (day % 4 === 1 ? 'üåí' : (day % 4 === 2 ? 'üåì' : 'üåî'));
                    moonPhase.textContent = phaseChar;
                    dayElement.appendChild(moonPhase);
                    
                    calendarGrid.appendChild(dayElement);
                }
            }
            
            // Êõ¥Êñ∞ÁªüËÆ°‰ø°ÊÅØ
            function updateStats() {
                totalHabitsElement.textContent = habits.length;
                
                // ËÆ°ÁÆóÊúÄÈïøËøûÁª≠Â§©Êï∞
                const longestStreak = habits.length > 0 ? 
                    Math.max(...habits.map(h => h.streak)) : 0;
                currentStreakElement.textContent = longestStreak;
                
                // ËÆ°ÁÆóÂÆåÊàêÁéáÔºà‰ªäÂ§©Â∑≤ÂÆåÊàêÁöÑ‰π†ÊÉØÊØî‰æãÔºâ
                const today = new Date().toDateString();
                const checkedToday = habits.filter(habit => 
                    habit.checkins.some(checkin => 
                        new Date(checkin).toDateString() === today
                    )
                ).length;
                
                const completionRate = habits.length > 0 ? 
                    Math.round((checkedToday / habits.length) * 100) : 0;
                completionRateElement.textContent = `${completionRate}%`;
            }
            
            // ‰ΩøÂáΩÊï∞Âú®ÂÖ®Â±ÄÂèØËÆøÈóÆ
            window.checkInHabit = checkInHabit;
            window.deleteHabit = deleteHabit;
        });
    </script>
</body>
</html>